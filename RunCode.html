<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>æ™ºèƒ½ä»£ç è¿è¡Œå™¨ Pro - è‰¾å…œå…œå„¿</title>
    <style>
        :root {
            --primary: #4CAF50;
            --accent: #007acc;
            --warning: #ff9800;
            --transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }

        /* ä¸»é¢˜æ–¹æ¡ˆ */
        .theme-dark { --bg: #1a1a1a; --panel: #252526; --text: #ccc; --border: #333; --pre-bg: #fff; }
        .theme-gray { --bg: #2d2d2d; --panel: #3c3c3c; --text: #eee; --border: #444; --pre-bg: #f5f5f5; }
        .theme-light { --bg: #ffffff; --panel: #f0f0f0; --text: #333; --border: #ddd; --pre-bg: #fff; }

        * { margin: 0; padding: 0; box-sizing: border-box; }
        html, body { height: 100%; width: 100%; overflow: hidden; background: #000; font-family: -apple-system, system-ui, sans-serif; }

        .app-wrapper { display: flex; flex-direction: column; height: 100vh; background: var(--bg); }

        /* é¡¶éƒ¨å¯¼èˆªï¼šæè‡´ç©ºé—´åˆ©ç”¨ */
        header {
            height: 48px; background: var(--panel); display: flex; justify-content: space-between; 
            align-items: center; padding: 0 12px; border-bottom: 1px solid var(--border); flex-shrink: 0;
        }
        .logo-box { color: var(--text); font-size: 14px; font-weight: bold; letter-spacing: 1px; }
        .logo-box span { color: var(--primary); font-size: 9px; margin-left: 2px; border: 1px solid; padding: 0 2px; }

        .nav-icons { display: flex; gap: 15px; }
        .icon-btn {
            background: none; border: none; cursor: pointer; display: flex; flex-direction: column;
            align-items: center; justify-content: center; transition: var(--transition); color: var(--text);
        }
        .icon-btn .emoji { font-size: 18px; line-height: 1; margin-bottom: 2px; }
        .icon-btn label { font-size: 9px; opacity: 0.8; cursor: pointer; }
        .icon-btn:active { transform: scale(0.8); }
        .btn-run { color: var(--primary); font-weight: bold; }

        /* ä¸»ä½“å¸ƒå±€ï¼šé»˜è®¤é¢„è§ˆåŒºæ›´å¤§ */
        main { flex: 1; display: flex; flex-direction: row; overflow: hidden; }
        
        .editor-container { flex: 0.8; display: flex; border-right: 1px solid var(--border); transition: var(--transition); position: relative; }
        .line-num { width: 30px; padding-top: 10px; color: #555; font-size: 10px; text-align: center; font-family: monospace; background: rgba(0,0,0,0.05); }
        textarea { flex: 1; background: transparent; color: var(--text); border: none; padding: 10px; resize: none; outline: none; font-size: 13px; font-family: 'Consolas', monospace; line-height: 1.5; }

        .preview-container { flex: 1.2; background: var(--pre-bg); transition: var(--transition); display: flex; flex-direction: column; }
        iframe { width: 100%; height: 100%; border: none; background: #fff; }

        /* åº•éƒ¨ä¿¡æ¯ç¾åŒ– */
        footer {
            background: var(--panel); border-top: 1px solid var(--border);
            padding: 8px 15px calc(8px + env(safe-area-inset-bottom)); flex-shrink: 0;
        }
        .footer-wrap { max-width: 900px; margin: 0 auto; display: flex; flex-direction: column; gap: 6px; }
        
        /* å¹¿å‘Šä½ï¼šæ¨ªå±å±…ä¸­å¡ç‰‡åŒ– */
        .ad-card { 
            background: linear-gradient(90deg, rgba(255,152,0,0.1) 0%, rgba(255,152,0,0.2) 50%, rgba(255,152,0,0.1) 100%);
            border: 1px solid rgba(255,152,0,0.3); border-radius: 6px; padding: 6px;
        }
        .ad-card a { color: var(--warning); text-decoration: none; font-size: 12px; font-weight: bold; display: block; text-align: center; }

        .info-bar { display: flex; justify-content: center; gap: 15px; font-size: 11px; color: var(--text); opacity: 0.7; flex-wrap: wrap; }
        .wx-link { color: var(--accent); font-weight: bold; cursor: pointer; text-decoration: underline; }

        /* åå¸æç¤º */
        #toast { position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%); background: rgba(0,0,0,0.8); color: white; padding: 8px 20px; border-radius: 20px; font-size: 13px; z-index: 1000; display: none; }

        /* åˆ†äº«å¼¹çª— */
        #shareModal {
            display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.85); z-index: 2000; align-items: center; justify-content: center; padding: 20px;
        }
        .share-card {
            background: white; padding: 25px; border-radius: 15px; width: 280px; text-align: center;
            box-shadow: 0 10px 30px rgba(0,0,0,0.5); position: relative;
        }
        .share-card h3 { color: #333; margin-bottom: 5px; font-size: 18px; }
        .share-card p { color: #666; font-size: 12px; margin-bottom: 15px; }
        #qrImg { width: 180px; height: 180px; margin: 10px 0; border: 1px solid #eee; }
        .qr-footer { font-size: 10px; color: #999; margin-top: 10px; }
        .close-modal { position: absolute; top: 10px; right: 10px; font-size: 20px; color: #ccc; cursor: pointer; }

        /* ç§»åŠ¨ç«¯ç«–å±å¸ƒå±€è°ƒæ•´ */
        @media (max-width: 768px) {
            main { flex-direction: column; }
            /* é‡ç‚¹ï¼šä»£ç åŒºå˜å°ï¼Œé¢„è§ˆåŒºå˜å¤§ */
            .editor-container { flex: 0.35; border-right: none; border-bottom: 1px solid var(--border); }
            .preview-container { flex: 0.65; }
            .nav-icons { gap: 10px; }
        }

        /* è¿è¡Œæ—¶çš„è§†è§‰åé¦ˆ */
        .run-active .preview-container { flex: 2; }
        .run-active .editor-container { flex: 0.2; }
    </style>
</head>
<body class="theme-dark">

    <div class="app-wrapper">
        <header>
            <div class="logo-box">RUNNER <span>V4.1</span></div>
            <div class="nav-icons">
                <button class="icon-btn" onclick="doPaste()">
                    <span class="emoji">ğŸ“‹</span><label id="l-paste">ç²˜è´´</label>
                </button>
                <button class="icon-btn" onclick="showShare()">
                    <span class="emoji">ğŸ“¤</span><label id="l-share">åˆ†äº«</label>
                </button>
                <button class="icon-btn" onclick="switchTheme()">
                    <span class="emoji">ğŸ¨</span><label id="l-theme">é£æ ¼</label>
                </button>
                <button class="icon-btn" onclick="clearEditor()">
                    <span class="emoji">ğŸ—‘ï¸</span><label id="l-clear">æ¸…ç©º</label>
                </button>
                <button class="icon-btn btn-run" onclick="runCode()">
                    <span class="emoji">â–¶</span><label id="l-run">è¿è¡Œ</label>
                </button>
            </div>
        </header>

        <main id="main-area">
            <div class="editor-container">
                <div class="line-num" id="ln-box">1</div>
                <textarea id="editor" spellcheck="false" placeholder="è¾“å…¥ä»£ç ..."></textarea>
            </div>
            <div class="preview-container">
                <iframe id="preview"></iframe>
            </div>
        </main>

        <footer>
            <div class="footer-wrap">
                <div class="ad-card">
                    <a href="#" id="ad-text">ğŸ è‰¾å…œå…œå„¿ä¸“å±ï¼šé«˜æ€§èƒ½äº‘æœåŠ¡å™¨ï¼Œå¼€å‘è€…ç‰¹æƒ å…¥å£ &gt;</a>
                </div>
                <div class="info-bar">
                    <span><b id="l-author">ä½œè€…</b>: è‰¾å…œå…œå„¿</span>
                    <span>WeChat: <b class="wx-link" onclick="copyWx()">857023577</b></span>
                    <span id="l-copy">Â© 2024 AI DOU DOU</span>
                </div>
            </div>
        </footer>
    </div>

    <div id="toast">æç¤º</div>

    <div id="shareModal" onclick="this.style.display='none'">
        <div class="share-card" onclick="event.stopPropagation()">
            <span class="close-modal" onclick="document.getElementById('shareModal').style.display='none'">&times;</span>
            <h3 id="s-title">æ™ºèƒ½ä»£ç è¿è¡Œå™¨</h3>
            <p id="s-sub">ä½œè€…: è‰¾å…œå…œå„¿ | å¾®ä¿¡å·: 857023577</p>
            <img id="qrImg" src="" alt="äºŒç»´ç ">
            <p class="qr-footer" id="s-tip">é•¿æŒ‰ä¿å­˜äºŒç»´ç ï¼Œåˆ†äº«ç»™å¥½å‹</p>
        </div>
    </div>

    <script>
        const editor = document.getElementById('editor');
        const lnBox = document.getElementById('ln-box');
        const preview = document.getElementById('preview');
        const toast = document.getElementById('toast');
        const mainArea = document.getElementById('main-area');

        // é»˜è®¤ä»‹ç»é¡µé¢
        const welcomeCode = `<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <style>
        body { font-family: sans-serif; padding: 15px; background: #fdfdfd; color: #444; }
        .header { color: #4CAF50; border-bottom: 2px solid #4CAF50; padding-bottom: 5px; margin-bottom: 15px; }
        .tag { display: inline-block; background: #e8f5e9; color: #2e7d32; padding: 2px 8px; border-radius: 4px; font-size: 12px; margin-right: 5px; }
        .contact { background: #f0f7ff; padding: 10px; border-radius: 8px; border: 1px solid #d0e3ff; margin-top: 15px; }
    </style>
</head>
<body>
    <h2 class="header">ğŸš€ åŠŸèƒ½æŒ‡å—</h2>
    <div>
        <span class="tag">è·¨å¹³å°</span><span class="tag">å¤šè¯­è¨€</span><span class="tag">è‡ªåŠ¨å­˜æ¡£</span>
    </div>
    <p style="margin-top:10px; font-size:14px;">1. åœ¨ä¸Šæ–¹è¾“å…¥ HTML/CSS/JS ä»£ç ã€‚<br>2. ç‚¹å‡» <b>è¿è¡Œ</b> å³å¯å®æ—¶é¢„è§ˆæ•ˆæœã€‚<br>3. ç‚¹å‡» <b>åˆ†äº«</b> å¯¼å‡ºåç‰‡äºŒç»´ç ã€‚</p>
    <div class="contact">
        <p><b>ä½œè€…ï¼š</b>è‰¾å…œå…œå„¿</p>
        <p><b>å¾®ä¿¡ï¼š</b>857023577</p>
    </div>
</body>
</html>`;

        // å¤šè¯­è¨€é…ç½®
        const i18n = {
            'zh-CN': { paste: 'ç²˜è´´', share: 'åˆ†äº«', theme: 'é£æ ¼', clear: 'æ¸…ç©º', run: 'è¿è¡Œ', author: 'ä½œè€…', st: 'æ™ºèƒ½è¿è¡Œå™¨', tip: 'é•¿æŒ‰ä¿å­˜äºŒç»´ç ' },
            'zh-TW': { paste: 'è²¼ä¸Š', share: 'åˆ†äº«', theme: 'é¢¨æ ¼', clear: 'æ¸…ç©º', run: 'é‹è¡Œ', author: 'ä½œè€…', st: 'æ™ºèƒ½é‹è¡Œå™¨', tip: 'é•·æŒ‰ä¿å­˜äºŒç¶­ç¢¼' },
            'en': { paste: 'Paste', share: 'Share', theme: 'Theme', clear: 'Clear', run: 'Run', author: 'Author', st: 'Code Runner', tip: 'Long press to save' }
        };

        let curLang = 'zh-CN';
        let themes = ['theme-dark', 'theme-gray', 'theme-light'];
        let tIdx = 0;

        function init() {
            // è¯­è¨€è¯†åˆ«
            const l = navigator.language;
            if(l.includes('TW') || l.includes('HK')) curLang = 'zh-TW';
            else if(!l.includes('zh')) curLang = 'en';
            
            const d = i18n[curLang];
            document.getElementById('l-paste').innerText = d.paste;
            document.getElementById('l-share').innerText = d.share;
            document.getElementById('l-theme').innerText = d.theme;
            document.getElementById('l-clear').innerText = d.clear;
            document.getElementById('l-run').innerText = d.run;
            document.getElementById('l-author').innerText = d.author;
            document.getElementById('s-title').innerText = d.st;
            document.getElementById('s-tip').innerText = d.tip;

            // å†…å®¹åŠ è½½
            const saved = localStorage.getItem('dd_v41_code');
            editor.value = saved || welcomeCode;
            
            const st = localStorage.getItem('dd_v41_theme');
            if(st) { tIdx = st; document.body.className = themes[tIdx]; }

            updateLines();
            runCode();
        }

        function runCode() {
            const doc = preview.contentDocument || preview.contentWindow.document;
            doc.open();
            doc.write('<meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0">');
            doc.write(editor.value);
            doc.close();

            // è¿è¡Œåé¦ˆï¼šç¬æ—¶æ‹‰å¤§é¢„è§ˆåŒº
            mainArea.classList.add('run-active');
            setTimeout(() => mainArea.classList.remove('run-active'), 800);
        }

        async function doPaste() {
            try {
                const txt = await navigator.clipboard.readText();
                if(txt) {
                    editor.value = txt;
                    updateLines();
                    runCode();
                    showToast("å·²å¯¼å…¥å†…å®¹");
                }
            } catch(e) {
                showToast("è¯·æ‰‹åŠ¨ç²˜è´´");
            }
        }

        function showShare() {
            const qr = document.getElementById('qrImg');
            qr.src = `https://api.qrserver.com/v1/create-qr-code/?size=200x200&data=${encodeURIComponent(window.location.href)}`;
            document.getElementById('shareModal').style.display = 'flex';
        }

        function switchTheme() {
            tIdx = (tIdx + 1) % themes.length;
            document.body.className = themes[tIdx];
            localStorage.setItem('dd_v41_theme', tIdx);
        }

        function clearEditor() {
            editor.value = '';
            updateLines();
            runCode();
            showToast("å·²æ¸…ç©º");
        }

        function copyWx() {
            navigator.clipboard.writeText('857023577');
            showToast("å¾®ä¿¡å·²å¤åˆ¶");
        }

        function showToast(m) {
            toast.innerText = m;
            toast.style.display = 'block';
            setTimeout(() => toast.style.display = 'none', 1500);
        }

        function updateLines() {
            const count = editor.value.split('\n').length;
            let h = '';
            for(let i=1; i<=count; i++) h += i + '<br>';
            lnBox.innerHTML = h;
        }

        editor.addEventListener('input', () => {
            updateLines();
            localStorage.setItem('dd_v41_code', editor.value);
        });

        editor.addEventListener('scroll', () => { lnBox.scrollTop = editor.scrollTop; });

        window.onload = init;
    </script>
</body>
</html>