<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    
    <title>Runner Pro - ä¸“ä¸šçº§ç§»åŠ¨ç«¯ä»£ç å®æ—¶é¢„è§ˆå™¨</title>
    <meta name="description" content="Runner Pro æ˜¯ä¸€æ¬¾æ”¯æŒå¤šä¸»é¢˜åˆ‡æ¢ã€è¦†ç›–ç²˜è´´ã€å®æ—¶é¢„è§ˆåŠåç‰‡å¯¼å‡ºçš„ä¸“ä¸šçº§ä»£ç è¿è¡Œå·¥å…·ã€‚é€‚é… iOS/Androidã€‚">
    <meta name="author" content="è‰¾å…œå…œå„¿">
    <link rel="canonical" href="https://i3doit.github.io/MyTools/RunCode.html" />
    
    <script src="https://cdn.jsdelivr.net/npm/html2canvas@1.4.1/dist/html2canvas.min.js"></script>

    <style>
        /* åŠ¨æ€å˜é‡ï¼šæ”¯æŒä¸»é¢˜åˆ‡æ¢ */
        :root {
            --primary: #4CAF50;
            --accent: #007acc;
            --warning: #ff9800;
            --wx-green: #07C160;
            /* é»˜è®¤æš—é»‘ä¸»é¢˜ */
            --bg: #1e1e1e;
            --panel: #252526;
            --text: #d4d4d4;
            --border: #333333;
        }

        /* ä¸åŒä¸»é¢˜é…è‰²æ–¹æ¡ˆ */
        [data-theme="slate"] { --bg: #21252b; --panel: #282c34; --border: #3e4451; }
        [data-theme="midnight"] { --bg: #0d1117; --panel: #161b22; --border: #30363d; }
        [data-theme="purple"] { --bg: #1a1b26; --panel: #24283b; --border: #414868; }

        * { margin: 0; padding: 0; box-sizing: border-box; -webkit-tap-highlight-color: transparent; }
        html, body { height: 100%; width: 100%; overflow: hidden; background-color: #000; font-family: -apple-system, system-ui, sans-serif; }

        .app-container {
            display: flex; flex-direction: column;
            height: 100vh; height: 100dvh; 
            background: var(--bg); position: relative;
            transition: background 0.3s ease;
        }

        /* é¡¶éƒ¨å¯¼èˆª */
        header {
            height: 54px; background: var(--panel); border-bottom: 1px solid var(--border);
            display: flex; justify-content: space-between; align-items: center; 
            padding: 0 10px; flex-shrink: 0; z-index: 100; transition: background 0.3s ease;
        }
        .logo { color: #fff; font-size: 14px; font-weight: bold; }
        .logo i { color: var(--primary); font-style: normal; font-size: 9px; border: 1px solid; padding: 0 2px; border-radius: 3px; margin-left: 4px; }

        .nav-icons { display: flex; gap: 12px; }
        .icon-btn {
            background: none; border: none; cursor: pointer; color: var(--text);
            display: flex; flex-direction: column; align-items: center;
        }
        .icon-btn span { font-size: 17px; }
        .icon-btn label { font-size: 9px; margin-top: 2px; color: #999; cursor: pointer; }

        /* å†…å®¹åŒº */
        main { flex: 1; display: flex; flex-direction: column; overflow: hidden; }
        .editor-box { height: 32%; display: flex; border-bottom: 2px solid var(--border); overflow: hidden; position: relative; }
        .preview-box { height: 68%; background: #fff; position: relative; }
        
        .line-num { width: 32px; padding-top: 10px; color: #555; font-size: 10px; text-align: center; background: rgba(0,0,0,0.2); font-family: monospace; }
        textarea { flex: 1; background: transparent; color: #9cdcfe; border: none; padding: 10px; resize: none; outline: none; font-size: 13px; font-family: 'Menlo', monospace; line-height: 1.5; }
        iframe { width: 100%; height: 100%; border: none; display: block; }

        /* æ‚¬æµ®ç¤¼åŒ… */
        .float-gift {
            display: none; position: absolute; right: 15px; bottom: 85px; 
            width: 48px; height: 48px; background: var(--warning); 
            border-radius: 50%; display: flex; align-items: center; justify-content: center;
            box-shadow: 0 4px 12px rgba(0,0,0,0.3); z-index: 500;
            text-decoration: none; font-size: 22px; animation: breathe 2s infinite;
        }
        @keyframes breathe { 0% { transform: scale(1); } 50% { transform: scale(1.08); } 100% { transform: scale(1); } }

        /* åº•éƒ¨ */
        footer {
            background: var(--panel); border-top: 1px solid var(--border);
            padding: 8px 12px calc(8px + env(safe-area-inset-bottom));
            flex-shrink: 0; z-index: 100; transition: background 0.3s ease;
        }
        .footer-row { display: flex; justify-content: center; align-items: center; gap: 15px; font-size: 11px; color: #888; }
        .wx-pill { 
            display: inline-flex; align-items: center; gap: 4px;
            background: var(--wx-green); color: white; padding: 2px 8px; 
            border-radius: 15px; font-size: 10px; cursor: pointer; font-weight: bold;
        }

        /* å¼¹çª—åŠåç‰‡ */
        #shareModal { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.9); z-index: 2000; align-items: center; justify-content: center; }
        .card-wrap { width: 85%; max-width: 300px; }
        #cardArea { background: #fff; padding: 25px 15px; border-radius: 15px; text-align: center; }
        .modal-btns { margin-top: 15px; display: flex; flex-direction: column; gap: 8px; }
        .btn-p { background: var(--primary); color: white; border: none; padding: 12px; border-radius: 10px; font-weight: bold; }
        .btn-s { color: #999; background: none; border: none; font-size: 12px; cursor: pointer; }

        #toast { position: fixed; top: 45%; left: 50%; transform: translate(-50%, -50%); background: rgba(0,0,0,0.85); color: #fff; padding: 10px 20px; border-radius: 20px; font-size: 13px; z-index: 3000; display: none; }

        @media (max-width: 768px) {
            .float-gift { display: flex; }
            .editor-box { height: 28%; } .preview-box { height: 72%; }
        }
        @media (min-width: 769px) {
            main { flex-direction: row; }
            .editor-box { height: 100%; width: 40%; border-bottom: none; border-right: 1px solid var(--border); }
            .preview-box { height: 100%; width: 60%; }
        }
    </style>
</head>
<body>

<div class="app-container" id="app">
    <header>
        <div class="logo">RUNNER <i>PRO</i></div>
        <div class="nav-icons">
            <button class="icon-btn" onclick="smartPaste()"><span>ğŸ“‹</span><label id="l-paste">è¦†ç›–ç²˜è´´</label></button>
            <button class="icon-btn" onclick="changeTheme()"><span>ğŸ¨</span><label id="l-theme">ä¸»é¢˜</label></button>
            <button class="icon-btn" onclick="openShare()"><span>ğŸ“¤</span><label id="l-share">ç”Ÿæˆåç‰‡</label></button>
            <button class="icon-btn" onclick="toggleLang()"><span>ğŸŒ</span><label id="l-lang">ä¸­æ–‡</label></button>
            <button class="icon-btn" style="color:var(--primary)" onclick="runCode()"><span>â–¶</span><label id="l-run">è¿è¡Œ</label></button>
        </div>
    </header>

    <main>
        <a href="https://t.zsxq.com/7tSuP" class="float-gift">ğŸ</a>
        <div class="editor-box">
            <div class="line-num" id="line-nums">1</div>
            <textarea id="editor" spellcheck="false" placeholder="åœ¨æ­¤è¾“å…¥ä»£ç ..."></textarea>
        </div>
        <div class="preview-box">
            <iframe id="preview-frame"></iframe>
        </div>
    </main>

    <footer>
        <div class="footer-row">
            <a href="https://mp.weixin.qq.com/s/3L4H-NkFsNiDzk9F-qlmCQ">ä½œè€…: è‰¾å…œå…œå„¿</a>
            <div class="wx-pill" onclick="copyWx()">
                <svg width="10" height="10" viewBox="0 0 24 24" fill="white"><path d="M8.5 13.5c-.8 0-1.5-.7-1.5-1.5s.7-1.5 1.5-1.5 1.5.7 1.5 1.5-.7 1.5-1.5 1.5zm7 0c-.8 0-1.5-.7-1.5-1.5s.7-1.5 1.5-1.5 1.5.7 1.5 1.5-.7 1.5-1.5 1.5zm7.5-3.5c0-4.4-4-8-9-8s-9 3.6-9 8c0 3.9 3.1 7.1 7.3 7.8l-.3 2.7 3-1.5h1c4.4 0 8-3.1 8-7h2zm-12.5 11l-2.5 1.2.3-2.2c-3.5-.8-6-3.4-6-6.5 0-3.9 3.6-7 8-7s8 3.1 8 7-3.6 7-8 7h-.2v.5z"/></svg>
                <span>857023577</span>
            </div>
        </div>
    </footer>
</div>

<div id="shareModal">
    <div class="card-wrap">
        <div id="cardArea">
            <h3 style="color:#333;font-size:20px;margin-bottom:5px;">Runner Pro</h3>
            <p style="font-size: 12px; color: #666;">å®æ—¶é¢„è§ˆ Â· ä¸“ä¸šå¯¼å‡º Â· è‰¾å…œå…œå„¿</p>
            <div style="width:160px;height:160px;margin:15px auto;border:1px solid #eee;padding:5px;">
                <img id="qrImg" style="width:100%;height:100%;" src="" alt="QR">
            </div>
            <p style="font-size: 10px; color: #aaa;">æ‰«ç é¢„è§ˆæˆ‘çš„ä»£ç ä½œå“</p>
        </div>
        <div class="modal-btns">
            <button class="btn-p" onclick="saveToGallery()">ä¿å­˜åç‰‡å›¾ç‰‡</button>
            <button class="btn-s" onclick="closeShare()">è¿”å›ç¼–è¾‘</button>
        </div>
    </div>
</div>

<div id="toast"></div>

<script>
    const editor = document.getElementById('editor');
    const previewFrame = document.getElementById('preview-frame');
    const lineNums = document.getElementById('line-nums');
    const toast = document.getElementById('toast');
    const app = document.getElementById('app');

    const themes = ["default", "slate", "midnight", "purple"];
    let currentThemeIndex = 0;

    const i18n = {
        'zh': {
            paste:'è¦†ç›–ç²˜è´´', share:'ç”Ÿæˆåç‰‡', run:'è¿è¡Œ', lang:'ä¸­æ–‡', theme:'åˆ‡æ¢ä¸»é¢˜',
            code: `<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <style>
        body { font-family: system-ui; padding: 25px; line-height: 1.6; color: #333; background: #fff; }
        .card { background: #fff; padding: 20px; border-radius: 12px; border: 1px solid #eee; box-shadow: 0 5px 15px rgba(0,0,0,0.05); }
        h2 { color: #4CAF50; margin-top: 0; }
        .btn-test { display: inline-block; padding: 10px 20px; background: #4CAF50; color: white; border-radius: 8px; text-decoration: none; margin-top: 15px; font-weight: bold; }
    </style>
</head>
<body>
    <div class="card">
        <h2>ğŸš€ Runner Pro å·²å°±ç»ª</h2>
        <p>1. <b>ç²˜è´´ï¼š</b>ç‚¹å‡»é¡¶éƒ¨å›¾æ ‡ä¸€é”®æ›¿æ¢ä»£ç ã€‚</p>
        <p>2. <b>å˜è‰²ï¼š</b>ç‚¹å‡»ğŸ¨å›¾æ ‡åˆ‡æ¢ä½ å–œæ¬¢çš„ä¸»é¢˜é¢œè‰²ã€‚</p>
        <p>3. <b>å¯¼å‡ºï¼š</b>æ»¡æ„åç”Ÿæˆä¸“å±äºŒç»´ç åç‰‡ã€‚</p>
        <a href="javascript:void(0)" class="btn-test" onclick="alert('æµ‹è¯•æˆåŠŸï¼')">ç‚¹æˆ‘äº¤äº’æµ‹è¯•</a>
    </div>
</body>
</html>`
        },
        'en': {
            paste:'Paste Over', share:'Share Card', run:'Run', lang:'English', theme:'Theme',
            code: `<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <style>
        body { font-family: system-ui; padding: 25px; line-height: 1.6; color: #333; background: #fff; }
        .card { background: #fff; padding: 20px; border-radius: 12px; border: 1px solid #eee; }
        h2 { color: #007acc; margin-top: 0; }
    </style>
</head>
<body>
    <div class="card">
        <h2>ğŸš€ Runner Pro Ready</h2>
        <p>1. Paste code to replace old content.</p>
        <p>2. Click ğŸ¨ icon to change editor themes.</p>
        <p>3. Export card with QR code for sharing.</p>
    </div>
</body>
</html>`
        }
    };

    let curLang = 'zh';

    function init() {
        const savedCode = localStorage.getItem('rp_v11_code');
        curLang = localStorage.getItem('rp_v11_lang') || 'zh';
        const savedTheme = localStorage.getItem('rp_v11_theme') || 'default';
        
        editor.value = savedCode || i18n[curLang].code;
        app.setAttribute('data-theme', savedTheme);
        currentThemeIndex = themes.indexOf(savedTheme);

        updateUI(); runCode(); updateLines();
    }

    function changeTheme() {
        currentThemeIndex = (currentThemeIndex + 1) % themes.length;
        const newTheme = themes[currentThemeIndex];
        app.setAttribute('data-theme', newTheme);
        localStorage.setItem('rp_v11_theme', newTheme);
        showToast("ä¸»é¢˜å·²åˆ‡æ¢");
    }

    function toggleLang() {
        curLang = (curLang === 'zh') ? 'en' : 'zh';
        localStorage.setItem('rp_v11_lang', curLang);
        editor.value = i18n[curLang].code;
        updateUI(); runCode(); updateLines();
    }

    function updateUI() {
        const d = i18n[curLang];
        document.getElementById('l-paste').innerText = d.paste;
        document.getElementById('l-theme').innerText = d.theme;
        document.getElementById('l-share').innerText = d.share;
        document.getElementById('l-lang').innerText = d.lang;
        document.getElementById('l-run').innerText = d.run;
    }

    function runCode() {
        const doc = previewFrame.contentDocument || previewFrame.contentWindow.document;
        doc.open();
        doc.write('<meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0">');
        doc.write(editor.value);
        doc.close();
    }

    function openShare() {
        const qrUrl = `https://api.qrserver.com/v1/create-qr-code/?size=250x250&data=${encodeURIComponent(window.location.href)}`;
        document.getElementById('qrImg').src = qrUrl;
        document.getElementById('shareModal').style.display = 'flex';
    }

    function closeShare() { document.getElementById('shareModal').style.display = 'none'; }

    function saveToGallery() {
        showToast("ç”Ÿæˆä¸­...");
        html2canvas(document.getElementById('cardArea'), { useCORS: true, scale: 2 }).then(canvas => {
            const a = document.createElement('a');
            a.download = 'RunnerPro_Work.png';
            a.href = canvas.toDataURL();
            a.click();
            showToast("å›¾ç‰‡å·²å¯¼å‡º");
        });
    }

    async function smartPaste() {
        try {
            const text = await navigator.clipboard.readText();
            if(text) { 
                editor.value = text;
                updateLines(); runCode(); 
                showToast("å·²è¦†ç›–å¹¶è¿è¡Œ"); 
            }
        } catch(e) { showToast("è¯·æ‰‹åŠ¨é•¿æŒ‰ç²˜è´´"); }
    }

    function copyWx() {
        const temp = document.createElement('textarea');
        temp.value = '857023577';
        document.body.appendChild(temp);
        temp.select();
        document.execCommand('copy');
        document.body.removeChild(temp);
        showToast("å¾®ä¿¡å·å·²å¤åˆ¶");
    }

    function showToast(m) {
        toast.innerText = m; toast.style.display = 'block';
        setTimeout(() => toast.style.display = 'none', 1500);
    }

    function updateLines() {
        const count = editor.value.split('\n').length;
        let h = ''; for(let i=1; i<=count; i++) h += i + '<br>';
        lineNums.innerHTML = h;
    }

    editor.addEventListener('input', () => {
        updateLines();
        localStorage.setItem('rp_v11_code', editor.value);
    });

    editor.addEventListener('scroll', () => { lineNums.scrollTop = editor.scrollTop; });

    init();
</script>
</body>
</html>
