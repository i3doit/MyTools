<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æˆ‘çš„æ–°å¹´ç›®æ ‡ - ç«‹ Flag æµ·æŠ¥å·¥å…·</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+SC:wght@400;700&display=swap');
        body { font-family: 'Noto Sans SC', sans-serif; background-color: #f3f4f6; }
        .poster-shadow { box-shadow: 0 20px 50px rgba(0,0,0,0.1); }
    </style>
</head>
<body class="p-4 md:p-10">
    <div class="max-w-6xl mx-auto grid grid-cols-1 lg:grid-cols-2 gap-10">
        
        <div class="bg-white p-6 rounded-2xl shadow-sm space-y-6">
            <div>
                <h2 class="text-2xl font-bold mb-4">âš™ï¸ é…ç½®ä½ çš„ Flag</h2>
                <div class="space-y-4">
                    <div>
                        <label class="block text-sm font-medium text-gray-700">æµ·æŠ¥æ ‡é¢˜</label>
                        <input type="text" id="titleInput" value="æˆ‘çš„æ–°å¹´ç›®æ ‡" class="mt-1 block w-full border-gray-300 rounded-md shadow-sm p-2 border focus:ring-orange-500 focus:border-orange-500">
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700">èƒŒæ™¯é¢œè‰²</label>
                        <input type="color" id="bgColorInput" value="#ffffff" class="mt-1 block w-20 h-10 border-none cursor-pointer">
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700">æ·»åŠ ç›®æ ‡ (åˆ†ç±» + å†…å®¹)</label>
                        <div class="flex gap-2 mt-1">
                            <select id="categorySelect" class="border rounded p-2">
                                <option>ğŸ“– è¯»ä¹¦</option>
                                <option>ğŸ’° å·¥ä½œæé’±</option>
                                <option>âœˆï¸ æ—…æ¸¸</option>
                                <option>ğŸ› ï¸ å‰¯ä¸š</option>
                                <option>ğŸ“± å…¬ä¼—å·/ç§åŸŸ</option>
                                <option>ğŸƒ å¥åº·</option>
                            </select>
                            <input type="text" id="goalInput" placeholder="è¾“å…¥ç®€çŸ­çš„ç›®æ ‡..." class="flex-1 border rounded p-2">
                            <button onclick="addGoal()" class="bg-orange-500 text-white px-4 py-2 rounded hover:bg-orange-600">æ·»åŠ </button>
                        </div>
                    </div>
                </div>
            </div>

            <div class="border-t pt-4">
                <button onclick="downloadPoster()" class="w-full bg-black text-white py-3 rounded-xl font-bold hover:opacity-80 transition">ç”Ÿæˆå¹¶ä¸‹è½½æµ·æŠ¥</button>
            </div>

            <div class="text-xs text-gray-500 space-y-2 pt-4 border-t">
                <p>Â© <span id="currentYear"></span> AI ææ•ˆå·¥å…·å®˜æ–¹ QQ ç¾¤ï¼š
                    <span class="text-blue-500 cursor-pointer" onclick="copyQQ()">857023577</span> (ç‚¹å‡»å¤åˆ¶)
                </p>
                <p>æŠ€æœ¯æ”¯æŒï¼š<a href="https://t.zsxq.com/7tSuP" target="_blank" class="text-blue-500">è‰¾å…œå…œå„¿</a></p>
                <p>æ›´å¤šå·¥å…·ï¼š<a href="https://mp.weixin.qq.com/s/uHh9gx2sUMOOjIhKyIbx4A" target="_blank" class="text-blue-500">ç‚¹å‡»æŸ¥çœ‹</a></p>
            </div>
        </div>

        <div class="flex flex-col items-center">
            <div id="posterCanvas" class="w-[375px] min-h-[600px] bg-white p-8 poster-shadow relative flex flex-col">
                <div class="absolute top-0 left-0 w-full h-2 bg-orange-400"></div>
                
                <h1 id="posterTitle" class="text-3xl font-black mt-8 mb-10 text-gray-800 tracking-wider text-center">æˆ‘çš„æ–°å¹´ç›®æ ‡</h1>
                
                <div id="goalsList" class="flex-1 space-y-6">
                    </div>

                <div class="mt-auto pt-10 flex justify-between items-end border-t border-gray-100">
                    <div class="text-[10px] text-gray-400 leading-relaxed">
                        <p>Powered by è‰¾å…œå…œå„¿</p>
                        <p>Focus on what matters.</p>
                        <p class="mt-1" id="posterDate"></p>
                    </div>
                    <div id="qrcode" class="w-16 h-16 bg-gray-100"></div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // åˆå§‹åŒ–å¹´ä»½
        document.getElementById('currentYear').innerText = new Date().getFullYear();
        document.getElementById('posterDate').innerText = new Date().toLocaleDateString();

        // åˆå§‹åŒ–äºŒç»´ç  (é»˜è®¤å½“å‰é¡µé¢ URL)
        const qrcode = new QRCode(document.getElementById("qrcode"), {
            text: window.location.href,
            width: 64,
            height: 64
        });

        // å®æ—¶åŒæ­¥æ ‡é¢˜
        document.getElementById('titleInput').addEventListener('input', (e) => {
            document.getElementById('posterTitle').innerText = e.target.value;
        });

        // å®æ—¶åŒæ­¥èƒŒæ™¯è‰²
        document.getElementById('bgColorInput').addEventListener('input', (e) => {
            document.getElementById('posterCanvas').style.backgroundColor = e.target.value;
        });

        // æ·»åŠ ç›®æ ‡åŠŸèƒ½
        function addGoal() {
            const cat = document.getElementById('categorySelect').value;
            const text = document.getElementById('goalInput').value;
            if(!text) return;

            const list = document.getElementById('goalsList');
            const item = document.createElement('div');
            item.className = "group relative border-l-4 border-orange-400 pl-4 py-1 animate-fade-in";
            item.innerHTML = `
                <div class="text-xs font-bold text-orange-500 uppercase tracking-widest">${cat}</div>
                <div class="text-lg text-gray-700 font-medium">${text}</div>
                <button onclick="this.parentElement.remove()" class="absolute right-0 top-0 text-red-300 hover:text-red-500 text-xs opacity-0 group-hover:opacity-100 transition">åˆ é™¤</button>
            `;
            list.appendChild(item);
            document.getElementById('goalInput').value = '';
        }

        // å¤åˆ¶ QQ å·
        function copyQQ() {
            navigator.clipboard.writeText('857023577');
            alert('QQå·å·²å¤åˆ¶åˆ°å‰ªè´´æ¿');
        }

        // ç”Ÿæˆæµ·æŠ¥å›¾ç‰‡å¹¶ä¸‹è½½
        function downloadPoster() {
            const poster = document.getElementById('posterCanvas');
            html2canvas(poster, {
                useCORS: true,
                scale: 3, // æé«˜æ¸…æ™°åº¦
            }).then(canvas => {
                const link = document.createElement('a');
                link.download = `Flag-${Date.now()}.png`;
                link.href = canvas.toDataURL('image/png');
                link.click();
            });
        }
    </script>
</body>
</html>
