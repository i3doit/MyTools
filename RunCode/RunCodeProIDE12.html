<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    
    <title>AiDouDou Code Runner - æ‰‹æœºç«¯å®æ—¶ä»£ç è¿è¡Œå·¥å…·</title>
    <meta name="description" content="AiDouDou Code Runneræ˜¯ä¸€æ¬¾æ”¯æŒä¸­è‹±åŒè¯­ã€å®æ—¶é¢„è§ˆã€åç‰‡ç”Ÿæˆçš„HTML/CSS/JSåœ¨çº¿ç¼–è¾‘å™¨ã€‚ä¸“ä¸ºç§»åŠ¨ç«¯ä¼˜åŒ–ï¼Œæ”¯æŒä¸€é”®åˆ†äº«ä¸ä¸‹è½½ã€‚">
    <meta name="keywords" content="ä»£ç è¿è¡Œå™¨, HTMLé¢„è§ˆ, è‰¾å…œå…œå„¿, Code Runner, ç§»åŠ¨ç«¯ç¼–è¾‘å™¨, å®æ—¶ä»£ç é¢„è§ˆ">
    <meta name="author" content="è‰¾å…œå…œå„¿ (AiDouDou)">
    <link rel="canonical" href="https://i3doit.github.io/MyTools/RunCode.html" />
    
    <meta property="og:title" content="AiDouDou Code Runner - éšæ—¶éšåœ°è¿è¡Œä»£ç ">
    <meta property="og:description" content="åŠŸèƒ½å¼ºå¤§çš„å®æ—¶ä»£ç ç¼–è¾‘å™¨ï¼Œæ”¯æŒåç‰‡å¼åˆ†äº«ä¸å¤šè¯­è¨€ã€‚">
    <meta property="og:url" content="https://i3doit.github.io/MyTools/RunCode.html">
    <meta property="og:type" content="website">

    <script src="https://cdn.jsdelivr.net/npm/html2canvas@1.4.1/dist/html2canvas.min.js"></script>

    <style>
        :root {
            --primary: #4CAF50;
            --accent: #007acc;
            --warning: #ff9800;
            --bg: #1a1a1a;
            --panel: #252526;
            --text: #ccc;
            --border: #333;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; }
        html, body { height: 100%; width: 100%; overflow: hidden; background: #000; font-family: -apple-system, sans-serif; }

        /* ä¸»å®¹å™¨ï¼šå›ºå®šåº•éƒ¨å¸ƒå±€ */
        .app-container {
            display: flex;
            flex-direction: column;
            height: 100vh;
            background: var(--bg);
        }

        /* é¡¶éƒ¨å¯¼èˆª */
        header {
            height: 50px; background: var(--panel); border-bottom: 1px solid var(--border);
            display: flex; justify-content: space-between; align-items: center; padding: 0 12px; flex-shrink: 0;
        }
        .logo { color: white; font-size: 14px; font-weight: bold; }
        .logo span { color: var(--primary); font-size: 10px; margin-left: 4px; border: 1px solid; padding: 0 2px; }

        .nav-icons { display: flex; gap: 15px; }
        .icon-btn {
            background: none; border: none; cursor: pointer; color: var(--text);
            display: flex; flex-direction: column; align-items: center; justify-content: center;
        }
        .icon-btn i { font-style: normal; font-size: 18px; line-height: 1; }
        .icon-btn label { font-size: 9px; margin-top: 3px; cursor: pointer; }

        /* ä¸­é—´å†…å®¹ï¼šæ¯”ä¾‹ 3:7 */
        main { flex: 1; display: flex; flex-direction: column; overflow: hidden; }
        .editor-section { height: 30%; display: flex; border-bottom: 1px solid var(--border); position: relative; }
        .preview-section { height: 70%; background: #ffffff; }
        
        .line-num { width: 30px; padding: 10px 0; color: #555; font-size: 10px; text-align: center; background: rgba(0,0,0,0.1); }
        textarea { flex: 1; background: transparent; color: var(--text); border: none; padding: 10px; resize: none; outline: none; font-size: 13px; font-family: monospace; line-height: 1.4; }
        iframe { width: 100%; height: 100%; border: none; }

        /* åº•éƒ¨ä¿¡æ¯ï¼šå¼ºåŠ›å›ºå®šï¼Œé˜²é®æŒ¡ */
        footer {
            background: var(--panel); border-top: 1px solid var(--border);
            padding: 8px 12px calc(10px + env(safe-area-inset-bottom));
            flex-shrink: 0; text-align: center;
        }
        .ad-banner {
            background: linear-gradient(90deg, transparent, rgba(255,152,0,0.15), transparent);
            padding: 6px; border-radius: 4px; margin-bottom: 6px;
        }
        .ad-banner a { color: var(--warning); text-decoration: none; font-size: 12px; font-weight: bold; }
        .author-row { display: flex; justify-content: center; gap: 20px; font-size: 11px; color: var(--text); opacity: 0.8; }
        .wx-btn { color: var(--accent); font-weight: bold; cursor: pointer; text-decoration: underline; }

        /* åˆ†äº«å¼¹çª— */
        #shareModal {
            display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.9); z-index: 1000; align-items: center; justify-content: center; padding: 20px;
        }
        .card-wrapper { display: flex; flex-direction: column; align-items: center; max-width: 320px; width: 100%; }
        .card-box { 
            background: #fff; padding: 25px; border-radius: 15px; width: 100%; text-align: center;
            box-shadow: 0 10px 30px rgba(0,0,0,0.5);
        }
        .card-box h3 { color: #333; font-size: 22px; margin-bottom: 8px; }
        .card-box p { color: #666; font-size: 14px; margin-bottom: 5px; }
        .qr-img { width: 180px; height: 180px; margin: 15px auto; border: 1px solid #f0f0f0; padding: 5px; display: block; }

        .modal-btns { margin-top: 20px; width: 100%; display: flex; flex-direction: column; gap: 12px; }
        .dl-btn { background: var(--primary); color: white; border: none; padding: 12px; border-radius: 8px; font-weight: bold; cursor: pointer; }
        .close-btn { color: #ccc; font-size: 13px; background: none; border: none; cursor: pointer; }

        #toast { position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%); background: rgba(0,0,0,0.85); color: white; padding: 10px 20px; border-radius: 25px; font-size: 13px; z-index: 2000; display: none; }

        /* æ¨ªå±é€‚é… */
        @media (min-width: 768px) {
            main { flex-direction: row; }
            .editor-section { height: 100%; width: 40%; border-bottom: none; border-right: 1px solid var(--border); }
            .preview-section { height: 100%; width: 60%; }
        }
    </style>
</head>
<body class="theme-dark">

<div class="app-container">
    <header>
        <div class="logo">AIDOUDOU <span>PRO</span></div>
        <div class="nav-icons">
            <button class="icon-btn" onclick="doPaste()"><i>ğŸ“‹</i><label id="btn-paste">ç²˜è´´</label></button>
            <button class="icon-btn" onclick="openShare()"><i>ğŸ“¤</i><label id="btn-share">åˆ†äº«</label></button>
            <button class="icon-btn" onclick="toggleLang()"><i>ğŸŒ</i><label id="btn-lang">ä¸­æ–‡</label></button>
            <button class="icon-btn" onclick="clearAll()"><i>ğŸ—‘ï¸</i><label id="btn-clear">æ¸…ç©º</label></button>
            <button class="icon-btn" style="color:var(--primary)" onclick="runCode()"><i>â–¶</i><label id="btn-run">è¿è¡Œ</label></button>
        </div>
    </header>

    <main>
        <section class="editor-section">
            <div class="line-num" id="ln-box">1</div>
            <textarea id="editor" spellcheck="false" placeholder="è¾“å…¥ HTML/CSS/JS ä»£ç ..."></textarea>
        </section>
        <section class="preview-section">
            <iframe id="preview"></iframe>
        </section>
    </main>

    <footer>
        <div class="ad-banner">
            <a href="#" id="ad-text">ğŸ è‰¾å…œå…œå„¿ä¸“å±ï¼šé«˜æ€§èƒ½äº‘æœåŠ¡å™¨ç‰¹æƒ å…¥å£ï¼ŒåŠ©åŠ›å¼€å‘è€… &gt;</a>
        </div>
        <div class="author-row">
            <span><b id="lbl-author">ä½œè€…</b>: è‰¾å…œå…œå„¿</span>
            <span>WeChat: <b class="wx-btn" onclick="copyWx()">857023577</b></span>
        </div>
    </footer>
</div>

<div id="shareModal">
    <div class="card-wrapper">
        <div id="cardArea" class="card-box">
            <h3 id="s-title">æ™ºèƒ½ä»£ç è¿è¡Œå™¨</h3>
            <p id="s-author">ä½œè€…: è‰¾å…œå…œå„¿ | å¾®ä¿¡: 857023577</p>
            <img id="qrImg" class="qr-img" src="" alt="äºŒç»´ç ">
            <p style="font-size: 11px; color: #999;" id="s-hint">é•¿æŒ‰æˆ–ç‚¹å‡»ä¸‹è½½å›¾ç‰‡ï¼Œåˆ†äº«ç»™ä½ çš„æœ‹å‹</p>
        </div>
        <div class="modal-btns">
            <button class="dl-btn" onclick="downloadCard()" id="btn-dl">ä¿å­˜å®Œæ•´åç‰‡åˆ°ç›¸å†Œ</button>
            <button class="close-btn" onclick="closeModal()" id="btn-back">è¿”å›ç¼–è¾‘</button>
        </div>
    </div>
</div>

<div id="toast"></div>

<script>
    const editor = document.getElementById('editor');
    const preview = document.getElementById('preview');
    const lnBox = document.getElementById('ln-box');
    const toast = document.getElementById('toast');

    // å¤šè¯­è¨€é…ç½®ä¸â€œæ´»çš„â€ç¤ºä¾‹æ–‡æ¡£
    const i18n = {
        'zh': {
            paste:'ç²˜è´´', share:'åˆ†äº«', clear:'æ¸…ç©º', run:'è¿è¡Œ', author:'ä½œè€…', lang:'ä¸­æ–‡', back:'è¿”å›',
            dl:'ä¿å­˜åç‰‡åˆ°ç›¸å†Œ', ad:'ğŸ è‰¾å…œå…œå„¿ä¸“å±ï¼šé«˜æ€§èƒ½äº‘æœåŠ¡å™¨ç‰¹æƒ å…¥å£ï¼ŒåŠ©åŠ›å¼€å‘è€… >',
            s_title: 'æ™ºèƒ½ä»£ç è¿è¡Œå™¨', s_hint: 'æ‰«æäºŒç»´ç ï¼Œå®æ—¶é¢„è§ˆä»£ç ',
            code: `<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <style>
        body { font-family: sans-serif; padding: 20px; line-height: 1.6; }
        .guide { background: #f9f9f9; padding: 15px; border-radius: 10px; border-left: 5px solid #4CAF50; }
        h2 { color: #4CAF50; margin-top: 0; }
        .btn { display: inline-block; padding: 8px 15px; background: #4CAF50; color: white; border-radius: 5px; text-decoration: none; margin-top: 10px; }
    </style>
</head>
<body>
    <div class="guide">
        <h2>ğŸš€ ä½¿ç”¨è¯´æ˜ä¹¦</h2>
        <p>1. <b>ç¼–å†™ï¼š</b>åœ¨ä¸Šæ–¹ç¼–è¾‘å™¨ä¿®æ”¹ HTML ä»£ç ã€‚</p>
        <p>2. <b>è¿è¡Œï¼š</b>ç‚¹å‡»å³ä¸Šè§’ â–¶ æŸ¥çœ‹æ•ˆæœã€‚</p>
        <p>3. <b>åˆ†äº«ï¼š</b>ç‚¹å‡» ğŸ“¤ ç”Ÿæˆä½ çš„ä¸“å±åç‰‡ã€‚</p>
        <p><b>ä½œè€…ï¼š</b>è‰¾å…œå…œå„¿</p>
        <a href="javascript:void(0)" class="btn" onclick="alert('è¿è¡ŒæˆåŠŸï¼')">ç‚¹å‡»æµ‹è¯•äº¤äº’</a>
    </div>
</body>
</html>`
        },
        'en': {
            paste:'Paste', share:'Share', clear:'Clear', run:'Run', author:'Author', lang:'English', back:'Back',
            dl:'Save Image to Album', ad:'ğŸ Exclusive: Best Cloud Server Deals for Devs >',
            s_title: 'Smart Code Runner', s_hint: 'Scan QR code for instant preview',
            code: `<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <style>
        body { font-family: sans-serif; padding: 20px; line-height: 1.6; }
        .guide { background: #f9f9f9; padding: 15px; border-radius: 10px; border-left: 5px solid #007acc; }
        h2 { color: #007acc; margin-top: 0; }
        .btn { display: inline-block; padding: 8px 15px; background: #007acc; color: white; border-radius: 5px; text-decoration: none; margin-top: 10px; }
    </style>
</head>
<body>
    <div class="guide">
        <h2>ğŸš€ User Manual</h2>
        <p>1. <b>Edit:</b> Modify HTML in the editor above.</p>
        <p>2. <b>Run:</b> Click â–¶ to see instant results.</p>
        <p>3. <b>Share:</b> Click ğŸ“¤ to generate your card.</p>
        <p><b>Author:</b> AiDouDou</p>
        <a href="javascript:void(0)" class="btn" onclick="alert('Interaction Success!')">Test Interaction</a>
    </div>
</body>
</html>`
        }
    };

    let curLang = 'zh';

    function init() {
        const savedCode = localStorage.getItem('dd_run_v6');
        curLang = localStorage.getItem('dd_lang_v6') || 'zh';
        editor.value = savedCode || i18n[curLang].code;
        updateUI();
        runCode();
        updateLines();
    }

    function toggleLang() {
        curLang = curLang === 'zh' ? 'en' : 'zh';
        localStorage.setItem('dd_lang_v6', curLang);
        editor.value = i18n[curLang].code; 
        updateUI();
        runCode();
        updateLines();
        showToast(curLang === 'zh' ? "å·²åˆ‡æ¢è‡³ä¸­æ–‡" : "Switched to English");
    }

    function updateUI() {
        const d = i18n[curLang];
        document.getElementById('btn-paste').innerText = d.paste;
        document.getElementById('btn-share').innerText = d.share;
        document.getElementById('btn-clear').innerText = d.clear;
        document.getElementById('btn-run').innerText = d.run;
        document.getElementById('btn-lang').innerText = d.lang;
        document.getElementById('btn-dl').innerText = d.dl;
        document.getElementById('btn-back').innerText = d.back;
        document.getElementById('lbl-author').innerText = d.author;
        document.getElementById('ad-text').innerText = d.ad;
        document.getElementById('s-title').innerText = d.s_title;
        document.getElementById('s-hint').innerText = d.s_hint;
    }

    function runCode() {
        const doc = preview.contentDocument || preview.contentWindow.document;
        doc.open();
        doc.write('<meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0">');
        doc.write(editor.value);
        doc.close();
    }

    function openShare() {
        const qrUrl = `https://api.qrserver.com/v1/create-qr-code/?size=250x250&data=${encodeURIComponent(window.location.href)}`;
        document.getElementById('qrImg').src = qrUrl;
        document.getElementById('shareModal').style.display = 'flex';
    }

    function closeModal() {
        document.getElementById('shareModal').style.display = 'none';
    }

    // çœŸæ­£çš„å›¾ç‰‡ä¸‹è½½åŠŸèƒ½
    function downloadCard() {
        showToast("æ­£åœ¨ç”Ÿæˆé«˜æ¸…å›¾ç‰‡...");
        const card = document.getElementById('cardArea');
        html2canvas(card, { useCORS: true, scale: 2 }).then(canvas => {
            const link = document.createElement('a');
            link.download = 'CodeRunner-Card-AiDouDou.png';
            link.href = canvas.toDataURL("image/png");
            link.click();
            showToast("å›¾ç‰‡å·²å¼€å§‹ä¸‹è½½");
        });
    }

    async function doPaste() {
        try {
            const text = await navigator.clipboard.readText();
            if(text) { editor.value = text; updateLines(); runCode(); showToast("ç²˜è´´æˆåŠŸ"); }
        } catch(e) { showToast("è¯·æ‰‹åŠ¨ç²˜è´´"); }
    }

    function clearAll() {
        editor.value = ''; updateLines(); runCode(); showToast("å·²æ¸…ç©º");
    }

    function copyWx() {
        navigator.clipboard.writeText('857023577').then(() => showToast("å¾®ä¿¡å·å·²å¤åˆ¶"));
    }

    function showToast(m) {
        toast.innerText = m; toast.style.display = 'block';
        setTimeout(() => toast.style.display = 'none', 1500);
    }

    function updateLines() {
        const count = editor.value.split('\n').length;
        let h = ''; for(let i=1; i<=count; i++) h += i + '<br>';
        lnBox.innerHTML = h;
    }

    editor.addEventListener('input', () => {
        updateLines();
        localStorage.setItem('dd_run_v6', editor.value);
    });

    editor.addEventListener('scroll', () => { lnBox.scrollTop = editor.scrollTop; });

    init();
</script>
</body>
</html>
