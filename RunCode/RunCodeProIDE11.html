<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>æ™ºèƒ½ä»£ç è¿è¡Œå™¨ Pro - è‰¾å…œå…œå„¿</title>
    <style>
        :root {
            --primary: #4CAF50;
            --accent: #007acc;
            --warning: #ff9800;
            --trans: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }

        /* ä¸»é¢˜é…ç½® */
        .theme-dark { --bg: #1a1a1a; --panel: #252526; --text: #ccc; --border: #333; --pre-bg: #ffffff; }
        .theme-gray { --bg: #2d2d2d; --panel: #3c3c3c; --text: #eee; --border: #444; --pre-bg: #f5f5f5; }
        .theme-light { --bg: #ffffff; --panel: #f0f0f0; --text: #333; --border: #ddd; --pre-bg: #ffffff; }

        * { margin: 0; padding: 0; box-sizing: border-box; }
        html, body { height: 100%; width: 100%; overflow: hidden; background: #000; font-family: -apple-system, system-ui, sans-serif; }

        .app-wrapper { display: flex; flex-direction: column; height: 100vh; background: var(--bg); }

        /* é¡¶éƒ¨å¯¼èˆª */
        header {
            height: 50px; background: var(--panel); display: flex; justify-content: space-between; 
            align-items: center; padding: 0 12px; border-bottom: 1px solid var(--border); flex-shrink: 0;
        }
        .logo { color: var(--text); font-size: 14px; font-weight: bold; }
        .logo span { color: var(--primary); font-size: 9px; border: 1px solid; padding: 0 2px; margin-left: 3px; }

        .nav-icons { display: flex; gap: 12px; }
        .icon-btn {
            background: none; border: none; cursor: pointer; display: flex; flex-direction: column;
            align-items: center; justify-content: center; color: var(--text); transition: var(--trans);
        }
        .icon-btn i { font-style: normal; font-size: 18px; margin-bottom: 2px; }
        .icon-btn label { font-size: 9px; opacity: 0.8; cursor: pointer; }
        .icon-btn:active { transform: scale(0.8); }
        .btn-run { color: var(--primary); font-weight: bold; }

        /* ä¸»ä½“å¸ƒå±€ - é»˜è®¤ä»£ç åŒºè¾ƒçª„ */
        main { flex: 1; display: flex; flex-direction: row; overflow: hidden; }
        
        /* PCç«¯æ¯”ä¾‹ï¼šä»£ç 40% é¢„è§ˆ60% */
        .editor-box { flex: 4; display: flex; border-right: 1px solid var(--border); position: relative; background: var(--bg); }
        .preview-box { flex: 6; background: var(--pre-bg); position: relative; }
        
        .line-num { width: 30px; padding-top: 10px; color: #555; font-size: 10px; text-align: center; font-family: monospace; background: rgba(0,0,0,0.05); }
        textarea { flex: 1; background: transparent; color: var(--text); border: none; padding: 10px; resize: none; outline: none; font-size: 13px; font-family: 'Consolas', monospace; line-height: 1.5; }
        iframe { width: 100%; height: 100%; border: none; background: #fff; }

        /* åº•éƒ¨ä¿¡æ¯ */
        footer {
            background: var(--panel); border-top: 1px solid var(--border);
            padding: 8px 0 calc(8px + env(safe-area-inset-bottom)); flex-shrink: 0;
        }
        .ad-row { 
            width: 100%; 
            background: linear-gradient(90deg, transparent 0%, rgba(255,152,0,0.15) 50%, transparent 100%);
            padding: 8px 0; margin-bottom: 5px;
        }
        .ad-row a { color: var(--warning); text-decoration: none; font-size: 13px; font-weight: bold; display: block; text-align: center; width: 100%; }
        
        .info-bar { display: flex; justify-content: center; gap: 20px; font-size: 11px; color: var(--text); opacity: 0.7; }
        .wx-link { color: var(--accent); font-weight: bold; cursor: pointer; text-decoration: underline; }

        /* åˆ†äº«å¼¹çª— */
        #shareModal {
            display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.85); z-index: 999; align-items: center; justify-content: center;
        }
        .share-card {
            background: white; padding: 25px; border-radius: 15px; width: 280px; text-align: center; position: relative;
        }
        .share-card h3 { color: #333; margin-bottom: 5px; font-size: 18px; }
        .share-card p { color: #666; font-size: 12px; }
        #qrImg { width: 180px; height: 180px; margin: 15px 0; border: 1px solid #eee; }
        .close-btn { position: absolute; top: 10px; right: 10px; font-size: 20px; color: #999; cursor: pointer; }

        /* æç¤ºæ¡† */
        #toast { position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%); background: rgba(0,0,0,0.8); color: white; padding: 10px 20px; border-radius: 20px; font-size: 13px; z-index: 1000; display: none; }

        /* ç§»åŠ¨ç«¯æ‰‹æœºç«–å±ä¸“é¡¹ä¼˜åŒ– */
        @media (max-width: 768px) {
            main { flex-direction: column; }
            /* å¼ºåˆ¶ä»£ç åŒºåªå 30%ï¼Œé¢„è§ˆå 70% */
            .editor-box { flex: none; height: 30%; border-right: none; border-bottom: 1px solid var(--border); }
            .preview-box { flex: none; height: 70%; }
            .ad-row { background: rgba(255,152,0,0.1); } /* æ‰‹æœºç«¯èƒŒæ™¯å‡æ·¡ */
        }
    </style>
</head>
<body class="theme-dark">

    <div class="app-wrapper">
        <header>
            <div class="logo">RUNNER <span>PRO</span></div>
            <div class="nav-icons">
                <button class="icon-btn" onclick="doPaste()"><i>ğŸ“‹</i><label id="l-paste">ç²˜è´´</label></button>
                <button class="icon-btn" onclick="openShare()"><i>ğŸ“¤</i><label id="l-share">åˆ†äº«</label></button>
                <button class="icon-btn" onclick="switchTheme()"><i>ğŸ¨</i><label id="l-theme">é£æ ¼</label></button>
                <button class="icon-btn" onclick="clearEditor()"><i>ğŸ—‘ï¸</i><label id="l-clear">æ¸…ç©º</label></button>
                <button class="icon-btn btn-run" onclick="runCode()"><i>â–¶</i><label id="l-run">è¿è¡Œ</label></button>
            </div>
        </header>

        <main id="main-view">
            <div class="editor-box">
                <div class="line-num" id="ln-container">1</div>
                <textarea id="editor" spellcheck="false" placeholder="è¾“å…¥ä»£ç ..."></textarea>
            </div>
            <div class="preview-box">
                <iframe id="preview-frame"></iframe>
            </div>
        </main>

        <footer>
            <div class="ad-row">
                <a href="#" id="ad-text">ğŸ è‰¾å…œå…œå„¿ä¸“å±ç¦åˆ©ï¼šé«˜æ€§èƒ½äº‘æœåŠ¡å™¨ä¼˜æƒ å…¥å£ &gt;</a>
            </div>
            <div class="info-bar">
                <span><b id="l-author">ä½œè€…</b>: è‰¾å…œå…œå„¿</span>
                <span>WeChat: <b class="wx-link" onclick="copyWx()">857023577</b></span>
            </div>
        </footer>
    </div>

    <div id="shareModal" onclick="this.style.display='none'">
        <div class="share-card" onclick="event.stopPropagation()">
            <span class="close-btn" onclick="document.getElementById('shareModal').style.display='none'">&times;</span>
            <h3 id="s-title">æ™ºèƒ½ä»£ç è¿è¡Œå™¨</h3>
            <p>ä½œè€…: è‰¾å…œå…œå„¿ | å¾®ä¿¡: 857023577</p>
            <img id="qrImg" src="" alt="äºŒç»´ç ">
            <p style="font-size: 10px; color: #999;">é•¿æŒ‰ä¿å­˜å›¾ç‰‡åˆ†äº«ç»™å¥½å‹</p>
        </div>
    </div>

    <div id="toast">æç¤º</div>

    <script>
        const editor = document.getElementById('editor');
        const lnContainer = document.getElementById('ln-container');
        const previewFrame = document.getElementById('preview-frame');
        const toast = document.getElementById('toast');

        // é»˜è®¤åˆå§‹åŒ–ç¤ºä¾‹
        const initialCode = `<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <style>
        body { font-family: sans-serif; padding: 20px; text-align: center; background: #fdfdfd; }
        .box { background: white; border-radius: 12px; padding: 20px; box-shadow: 0 4px 15px rgba(0,0,0,0.1); border: 1px solid #eee; }
        h2 { color: #4CAF50; }
        p { color: #666; line-height: 1.6; }
        .btn { display: inline-block; padding: 10px 20px; background: #4CAF50; color: white; border-radius: 6px; text-decoration: none; margin-top: 15px; }
    </style>
</head>
<body>
    <div class="box">
        <h2>ğŸš€ æ™ºèƒ½è¿è¡Œå™¨å·²å°±ç»ª</h2>
        <p>1. åœ¨ä¸Šæ–¹ä¿®æ”¹ HTML/CSS ä»£ç <br>2. ç‚¹å‡» <b>è¿è¡Œ</b> æŸ¥çœ‹å®æ—¶æ•ˆæœ<br>3. ç‚¹å‡» <b>åˆ†äº«</b> ç”Ÿæˆåç‰‡æµ·æŠ¥</p>
        <p><b>ä½œè€…ï¼š</b>è‰¾å…œå…œå„¿</p>
        <a href="javascript:void(0)" class="btn" onclick="alert('äº¤äº’æˆåŠŸï¼')">ç‚¹æˆ‘æµ‹è¯•</a>
    </div>
</body>
</html>`;

        const i18n = {
            'zh-CN': { paste:'ç²˜è´´', share:'åˆ†äº«', theme:'é£æ ¼', clear:'æ¸…ç©º', run:'è¿è¡Œ', author:'ä½œè€…' },
            'zh-TW': { paste:'è²¼ä¸Š', share:'åˆ†äº«', theme:'é¢¨æ ¼', clear:'æ¸…ç©º', run:'é‹è¡Œ', author:'ä½œè€…' },
            'en': { paste:'Paste', share:'Share', theme:'Style', clear:'Clear', run:'Run', author:'Author' }
        };

        let curLang = 'zh-CN';
        let themes = ['theme-dark', 'theme-gray', 'theme-light'];
        let tIdx = 0;

        function init() {
            // è¯­è¨€è¯†åˆ«
            const l = navigator.language;
            if(l.includes('TW')) curLang = 'zh-TW';
            else if(!l.includes('zh')) curLang = 'en';

            const d = i18n[curLang];
            document.getElementById('l-paste').innerText = d.paste;
            document.getElementById('l-share').innerText = d.share;
            document.getElementById('l-theme').innerText = d.theme;
            document.getElementById('l-clear').innerText = d.clear;
            document.getElementById('l-run').innerText = d.run;
            document.getElementById('l-author').innerText = d.author;

            const saved = localStorage.getItem('dd_v42_code');
            editor.value = saved || initialCode;
            
            const savedTheme = localStorage.getItem('dd_v42_theme');
            if(savedTheme) { tIdx = savedTheme; document.body.className = themes[tIdx]; }

            updateLines();
            runCode();
        }

        function runCode() {
            const doc = previewFrame.contentDocument || previewFrame.contentWindow.document;
            doc.open();
            doc.write('<meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0">');
            doc.write(editor.value);
            doc.close();
            showToast("è¿è¡ŒæˆåŠŸ");
        }

        async function doPaste() {
            try {
                const text = await navigator.clipboard.readText();
                if(text) {
                    editor.value = text;
                    updateLines();
                    runCode();
                }
            } catch(e) {
                showToast("è¯·æ‰‹åŠ¨é•¿æŒ‰ç²˜è´´");
            }
        }

        function openShare() {
            const qr = document.getElementById('qrImg');
            // ä½¿ç”¨å…¬å…±APIç”ŸæˆäºŒç»´ç 
            qr.src = `https://api.qrserver.com/v1/create-qr-code/?size=200x200&data=${encodeURIComponent(window.location.href)}`;
            document.getElementById('shareModal').style.display = 'flex';
        }

        function switchTheme() {
            tIdx = (tIdx + 1) % themes.length;
            document.body.className = themes[themeIdx = tIdx];
            localStorage.setItem('dd_v42_theme', tIdx);
        }

        function clearEditor() {
            editor.value = '';
            updateLines();
            runCode();
            showToast("å·²æ¸…ç©º");
        }

        function copyWx() {
            navigator.clipboard.writeText('857023577').then(() => showToast("å¾®ä¿¡å·²å¤åˆ¶"));
        }

        function showToast(m) {
            toast.innerText = m;
            toast.style.display = 'block';
            setTimeout(() => toast.style.display = 'none', 1500);
        }

        function updateLines() {
            const count = editor.value.split('\n').length;
            let h = '';
            for(let i=1; i<=count; i++) h += i + '<br>';
            lnContainer.innerHTML = h;
        }

        editor.addEventListener('input', () => {
            updateLines();
            localStorage.setItem('dd_v42_code', editor.value);
        });

        editor.addEventListener('scroll', () => { lnContainer.scrollTop = editor.scrollTop; });

        window.onload = init;
    </script>
</body>
</html>
